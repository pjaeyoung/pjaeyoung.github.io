{"componentChunkName":"component---src-templates-blog-post-js","path":"/challenge30/25/","result":{"data":{"site":{"siteMetadata":{"title":"DODO's DEV LOG","author":"dodo","siteUrl":"https://pjaeyoung.github.io","comment":{"disqusShortName":"dodo","utterances":"pjaeyoung/dodo-blog"},"sponsor":{"buyMeACoffeeId":""}}},"markdownRemark":{"id":"01582994-14d9-5cb2-bba6-4785a1eb6c73","excerpt":"react native 스크립트 명령어 parallex로 사용하기 스크린샷, 2021-04-26 22-15-38 최근 안드로이드 앱을 만드는 프로젝트를 진행하고 있다.\n터미널 하나에 명령어 한줄만 치면 웹어플리케이션이 실행했던 것과 달리 metro 서버를 키고 android build 후 devtools를 실행하는(총 3번에 걸처 진행해야 하는) 번거로움이 있다. 스크린샷, 2021-04-26 22-14-4…","html":"<h2 id=\"react-native-스크립트-명령어-parallex로-사용하기\" style=\"position:relative;\"><a href=\"#react-native-%EC%8A%A4%ED%81%AC%EB%A6%BD%ED%8A%B8-%EB%AA%85%EB%A0%B9%EC%96%B4-parallex%EB%A1%9C-%EC%82%AC%EC%9A%A9%ED%95%98%EA%B8%B0\" aria-label=\"react native 스크립트 명령어 parallex로 사용하기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>react native 스크립트 명령어 parallex로 사용하기</h2>\n<p><img src=\"https://user-images.githubusercontent.com/47022167/116088590-f9450c80-a6dc-11eb-8f3b-d3d81dccafee.png\" alt=\"스크린샷, 2021-04-26 22-15-38\"></p>\n<p>최근 안드로이드 앱을 만드는 프로젝트를 진행하고 있다.\n터미널 하나에 명령어 한줄만 치면 웹어플리케이션이 실행했던 것과 달리 metro 서버를 키고 android build 후 devtools를 실행하는(총 3번에 걸처 진행해야 하는) 번거로움이 있다.</p>\n<p><img src=\"https://user-images.githubusercontent.com/47022167/116088585-f8ac7600-a6dc-11eb-8029-d1c894240ab5.png\" alt=\"스크린샷, 2021-04-26 22-14-45\"></p>\n<p>커맨드 명령어를 연달아 실행하는 기호가 <code class=\"language-text\">&amp;&amp;</code> 와 <code class=\"language-text\">&amp;</code>가 존재한다. <code class=\"language-text\">&amp;&amp;</code>는 앞의 커맨드 실행이 완료된 후 뒤의 커맨드가 실행되는 구조다. <code class=\"language-text\">&amp;</code>는 앞의 커맨드가 실행과 동시에 병렬적으로 뒤의 커맨드도 실행된다.</p>\n<p>문제는 <code class=\"language-text\">&amp;</code>로 <code class=\"language-text\">yarn start &amp; yarn android &amp; yarn devtools</code>를 실행하면 android emulator가 제대로 작동이 되지 않았다.(이때는 metro가 선행되어야 android emulator가 실행이 된다고 생각했다.)</p>\n<p>구글링하다 <a href=\"https://www.npmjs.com/package/concurrently\">concurrently</a> 패키지를 발견했다. concurrently는 계속 실행되어야 하는 다중 커맨드를 동시에 실행할 수 있게 도와준다.</p>\n<p>concurrently를 설치하고</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">yarn</span> <span class=\"token function\">add</span> -D concurrently</code></pre></div>\n<p>package.json 파일에서 script를 아래와 같이 지정하면 된다.</p>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\"><span class=\"token punctuation\">{</span>\n  <span class=\"token property\">\"scripts\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token property\">\"android\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"react-native run-android\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"start\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"react-native start\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"dev\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"concurrently --kill-others \\\"yarn start\\\" &amp; yarn android &amp; yarn devtools\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"devtools\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"react-devtools\"</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>** 추가 사항 **</p>\n<p>concurrently 패키지를 설치하지 않고 하는 방법을 알았다. 커맨드 실행 순서만 바꿔주면 된다.</p>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\"><span class=\"token punctuation\">{</span>\n  <span class=\"token property\">\"scripts\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token property\">\"android\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"react-native run-android\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"start\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"react-native start\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"dev\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"yarn android &amp; yarn devtools &amp; yarn start\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"devtools\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"react-devtools\"</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h2 id=\"husky-대신-node-git-hooks-도입기\" style=\"position:relative;\"><a href=\"#husky-%EB%8C%80%EC%8B%A0-node-git-hooks-%EB%8F%84%EC%9E%85%EA%B8%B0\" aria-label=\"husky 대신 node git hooks 도입기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>husky 대신 node-git-hooks 도입기</h2>\n<p>최근에 husky가 상업용 프로젝트 사용에 제약을 걸어서 대안 라이브러리를 찾다 <code class=\"language-text\">node-git-hooks</code>를 알게 되었다(<a href=\"https://taegon.kim/archives/10276\">관련 아티클</a>).</p>\n<p>사용방법은 다음과 같다.</p>\n<ol>\n<li><code class=\"language-text\">node-git-hooks</code>와 <code class=\"language-text\">lint-staged</code>를 설치한다.</li>\n</ol>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">yarn</span> <span class=\"token function\">add</span> -D node-git-hooks lint-staged</code></pre></div>\n<ol start=\"2\">\n<li>package.json에서 스크립트를 작성한다.</li>\n</ol>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\"><span class=\"token punctuation\">{</span>\n  <span class=\"token property\">\"scripts\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token property\">\"postinstall\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"node-git-hooks\"</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">// 반드시 작성할 것</span>\n    <span class=\"token property\">\"test\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"jest --passWithNoTests\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"lint\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"eslint --no-error-on-unmatched-pattern --ext .tsx --ext .ts .\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"lint-staged\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"lint-staged\"</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"lint-staged\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token property\">\"**/*.{ts,tsx}\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">\"yarn lint\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"yarn test\"</span><span class=\"token punctuation\">]</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<ol start=\"3\">\n<li>커스텀 githooks를 팀원들과 같이 사용하기 위해 <code class=\"language-text\">.githooks</code> 폴더(이름은 아무거나 상관없음)를 프로젝트 최상단에 생성한다. 그 다음 사용할 hooks 파일을 작성한다(나는 pre-commit과 pre-push만 작성했다).</li>\n</ol>\n<p><img src=\"https://user-images.githubusercontent.com/47022167/116092908-2c899a80-a6e1-11eb-8ba6-9f9f86aae2c7.png\" alt=\"스크린샷, 2021-04-26 22-45-33\"></p>\n<ol start=\"4\">\n<li>hooks 파일은 해당 hook에서 실행하길 원하는 script 명령어를 작성한다.</li>\n</ol>\n<p>커밋할 때는 staged에 올려진 파일들만 검사하고</p>\n<div class=\"gatsby-highlight\" data-language=\"txt\"><pre class=\"language-txt\"><code class=\"language-txt\"># .githooks/pre-commit\n\nyarn lint-staged</code></pre></div>\n<p>푸쉬할 때는 전체 파일을 검사하도록 지정했다.</p>\n<div class=\"gatsby-highlight\" data-language=\"txt\"><pre class=\"language-txt\"><code class=\"language-txt\"># .githooks/pre-push\n\nyarn lint &amp;&amp; yarn test</code></pre></div>\n<ol start=\"5\">\n<li>만들어 놓은 hooks 파일들을 실행시키기 위해서는 실행권한을 지정해줘야 한다.</li>\n</ol>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># .githooks 안의 모든 폴더에 실행권한(x) 부여</span>\n<span class=\"token function\">chmod</span> +x .githooks/*</code></pre></div>\n<ol start=\"6\">\n<li>마지막으로 기존에 설정된 git hook 실행 경로를 새로 만든 <code class=\"language-text\">.githooks</code> 가 있는 경로로 변경해야 한다.</li>\n</ol>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">git</span> config core.hookspath .githooks</code></pre></div>","frontmatter":{"title":"25","date":"April 25, 2021"}}},"pageContext":{"slug":"/challenge30/25/","previous":{"fields":{"slug":"/uiux/eye-tracking/"},"frontmatter":{"title":"eye tracking","category":"uiux","draft":false}},"next":null}},"staticQueryHashes":["3128451518","521680639"]}
---
title: '20210816'
date: 2021-08-16 23:08:28
category: naver-special-intensive-class
thumbnail: { thumbnailSrc }
draft: false
---

## 알고리즘 문제 풀기

- compose, pipe 문제
  - 함수의 실행 결과를 다음 함수의 인자로 전달하는 과정을 반복한 후 최종 결과를 리턴하는 함수
  - reduce, reduceRight를 활용해서 구현

## 프로젝트 개선

### 고민 1 - UserFolder 컴포넌트 렌더링

- 이전 코드는 수정모드여부에 따라 변경되는 부분이 존재한다.
  - 수정모드인 경우, 모든 UserFolder는 삭제 버튼 렌더링 X, 수정 대상인 UserFolder에만 FolderName이 수정가능한 input값으로 변경되어야 함
  - 수정모드가 아닌 경우, 모든 UserFolder는 삭제 버튼을 렌더링, FolderName은 text로 렌더링
- 재사용성을 위해 composition(합성)을 활용한 것 까진 좋았으나 내가 봐도 코드를 해석하기가 까다롭다. props drilling 현상을 줄이기 위해 따로 컴포넌트로 분리하지 않았는데 분리하는 게 좋겠다.
- 클린코드 중에서 function의 flag 파라미터로 if문으로 나누는 대신 두 function으로 나누는 걸 권장했다. 컴포넌트도 하나의 function이니 저 말대로 수정모드의 UserFolder와 일반 UserFolder를 두 가지로 나눠서 렌더링하자.

```js

<>
          {userFolders.map(({ id, folderName, borderColor }, index) => {
            const FolderSvg = FolderSvgs[index];
            return (
              <React.Fragment key={id}>
                <TouchableOpacity
                  activeOpacity={editMode ? 1 : 0.2}
                  style={[userFolderLayoutData[index].folderLayout]}
                  onPress={editMode ? undefined : onEditMode(index)}>
                  <FolderSvg borderColor={borderColor}>
                    <FolderName top={index === 1 ? '60%' : '45%'}>{folderName}</FolderName>
                  </FolderSvg>
                </TouchableOpacity>
                {!editMode && (
                  <DeleteButton
                    style={userFolderLayoutData[index].deleteButtonLayout}
                    onPressIn={onClickDeleteButton(id)}>
                    <Icon name="remove" color="#fff" />
                  </DeleteButton>
                )}
              </React.Fragment>
            );
          })}

```

### 고민 2 - redux 비동기 처리

- 분류 폴더를 파일시스템과 AsyncStorage 를 둘 다 처리해야 한다.
- 문제는 로직이 계속 돌고 도는 무한 순환으로 간다는 점이다.
- 가령 분류 폴더를 생성하는 기능을 만든다고 하자. 그럼 아래와 같은 로직을 실행한다.
  - 1. 파일시스템으로 내장메모리에 폴더를 생성한다.
       - 폴더 생성이 실패하면 에러메세지(폴더 생성 실패)를 출력한다. 로직 종료
  - 2. AsyncStorage에 생성된 폴더 정보를 저장한다.
    - 폴더 정보 저장이 실패하면 에러메세지(폴더 생성 실패)를 출력한다.
    - 파일시스템으로 내장메모리 생성한 폴더를 삭제한다.
      - 생성한 폴더 삭제가 실패하면 에러메세지(폴더 삭제 실패)를 출력한다. => 유저는 폴더 생성을 했는데 삭제 메세지가 출력된다?
      - AsyncStorage에 생성된 폴더 정보를 저장한다. (돌고 돈다)
  - 3.  성공메세지(폴더 생성 성공)를 출력한다.
- redux state와 파일시스템, AsyncStorage 모두 동기화 처리를 하기가 까다롭다.
- 일단 2번의 경우 파일 시스템으로 삭제했을 때 예외처리를 하지 않았다. 찜찜하다.
- 내가 신경써야할 것을 줄이는 방법이 뭐가 있을까 검색했더니 **redux-persist** 를 알게 되었다.
- **redux-persist**가 AsyncStorage 동기화처리를 대신해준다. (wow) 내일 적용해봐야지

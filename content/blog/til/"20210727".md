---
title: "20210727"
date: 2021-07-27 15:07:84
category: til
thumbnail: { thumbnailSrc }
draft: false
---

## 커리어리 습관챌린지 4기 
- 이번주부터 커리어리 글쓰기 습관챌린지를 시작했다. 
- 꾸준히 기술블로그를 읽되 대충 넘기지 않고 이해가 될 때까지 읽고 소화해서 요약 정리를 하면 머릿속에 오래 남을 거고 이 습관을 강제적으로 푸쉬해줄 동기를 부여해주기 위해 참여했다. 
- 첫 글은 한창 테스트 코드로 머리를 싸매고 있기 때문에 테스트 코드 작성을 장려하는 글로 시작했다. [관련 링크](https://careerly.co.kr/comments/29160?utm_campaign=self-share) 

## 블로그 디자인 변경
다른 개발자분들의 블로그를 보고 내 블로그가 너무 흔해빠진(탬플릿 고대로 가져다 썼기 때문) 디자인이라 약간 손보기로 했다. 검정-흰색의 모노톤으로 싹 바꾸고 싶었으나 일부 디자인(카테고리)이 고쳐지지 않는다. 시간이 오래걸려 여기까지! 조금씩 뜯어고쳐보자. 

## 스캡 프로젝트 
여전히 redux 테스트 코드 작성중이다. jest 유틸리티(spyOn, fn, mock)를 쓰다가 작동이 원하는대로 되지 않길래 [DaleSeo님 블로그](https://www.daleseo.com/jest-fn-spy-on/)를 참고하면서 정확한 사용법을 익혔다.   
  
  > fn : 가짜 함수를 만들어준다. 콜백함수와 같이 내부적으로 호출여부를 파악하거나 테스트 환경에서 동작하기 어려운 로직을 단순화시키는 용도로 쓰인다.   
  spyOn: fn, mock과 달리 가짜 함수로 대체하지 않고 모듈에 들어있는 함수를 추적하기만 한다.  
  mock : 덩치가 큰 모듈이 내보내는 함수들을 한 번에 가짜함수로 대신하고 싶을 때 쓴다.  

내 경우 react-native-fs를 사용하는 "fsFunctions"가 redux에서 사용된다. 예제와 달리 depth가 2번 들어간다. "fsFunctions"만 mock하면 될 줄 알았으나 react-native-fs 모듈 임포트 문제가 발생한다. "fsFunctions"처럼 `jest.mock("react-native-fs")` 를 같이 써주기만 하면 해결될까? 아니다. 아래와 같은 에러가 발생한다. 

```bash

jest encountered an unexpected token
This usually means that you are trying to import a file which Jest cannot parse, e.g. it's not plain JavaScript.
By default, if Jest sees a Babel config, it will use that to transform your files, ignoring "node_modules".

```

이 에러를 해결하는 방법은 `__mocks__` 폴더를 생성하고 `react-native-fs.ts`에 사용할 함수를 모킹해서 내보내기하면 된다. 

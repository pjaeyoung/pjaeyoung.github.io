---
title: '20210721'
date: 2021-07-21 22:07:38
category: til
thumbnail: { thumbnailSrc }
draft: false
---

## 자료구조/알고리즘

최대힙 삭제를 구현하는 방법을 알게 되었다.
우선 트리의 제일 위에 있는 노드를 꺼낸다.
그 다음 트리의 마지막 노드를 제일 위에 넣는다.
위로 옮긴 노드를 자식 노드들과 크기 비교를 한다.
만약 자식노드가 더 크다면 자리를 바꾼다.
마지막 노드에 도달하지 않았고 최대힙의 조건인 '부모노드는 자식노드보다 값이 크거나 같다'을 만족하면 비교과정을 반복한다.

```js
const MaxHeap = function() {
  this.heap = [null]

  this.insert = value => {
    this.heap.push(value)
    const index = this.heap.length - 1

    while (index > 1 && value > this.heap[Math.floor(index / 2)]) {
      this.heap[index] = this.heap[Math.floor(index / 2)]
      this.heap[Math.floor(index / 2)] = value
      index = Math.floor(index / 2)
    }
  }

  this.remove = () => {
    const maxValue = this.heap[1]
    const lastValue = this.heap.pop()
    this.heap[1] = lastValue
    this.reorder(1)
    return maxValue
  }

  this.reorder = index => {
    let large = index
    const l = index * 2
    const r = index * 2 + 1
    const length = this.heap.length

    if (l < length && this.heap[l] > this.heap[large]) {
      large = l
    }

    if (r < length && this.heap[r] > this.heap[large]) {
      large = r
    }

    if (large !== index) {
      const temp = this.heap[large]
      this.heap[large] = this.heap[index]
      this.heap[index] = temp
      this.reorder(large)
    }
  }
}
```

## 면접준비

> Q. 자바스크립트에서 this란 ?

javascript의 this는 런타임에 결정된다. 함수 밖에서 this는 global/window 객체를 가리킨다.
일반 함수 안에서 this 또한 global/window 객체를 가리킨다.
생성자 함수를 new 연산자로 호출할 때 this는 인스턴스 객체를 가리킨다.
객체의 메서드로 호출할 때 this는 호출을 한 객체를 가리킨다.
일반 함수에 call/apply/bind를 사용하면 첫 번째 인자로 넘겨준 인자가 this를 대체한다.

## 스캡프로젝트

- eslint maximum call stack error 해결
  - eslint 관련된 패키지를 다 삭제하고 eslintrc.js 파일도 지웠다.
  - `yarn eslint --init` 을 사용해서 자동으로 필요한 패키지를 설치하고 eslintrc.js를 작성하도록 했다.
  - package.json의 스크립트 lint를 `eslint --ext .tsx --ext .ts src/` 로 작성했다(적용할 범위를 src 폴더 내로 지정함).
  - eslint가 잘 되는 걸 확인하고 이참에 husky도 적용했다.
- husky 적용

  - 이 프로젝트가 특이하게 server와 client 폴더로 나눠져있다보니 동일한 depth에 위치해야 할 git hooks가 안 먹히는 문제가 있었다.
  - 이 문제를 해결하는 방법을 공식문서에서 제공해줬다. husky 설치할 때 경로를 지정하면 된다고 설명이 되어있다. 스캡 프로젝트의 경우를 예로 들면 아래처럼 작성된다.

  ```json
  // package.json
  {
    "prepare": "cd .. && husky install client/.husky"
  }
  ```

  - 그 다음 pre-commit 파일에도 적용할 경로를 입력해준다.

```sh
# .husky/pre-commit
# ...

cd client
yarn lint-staged

```

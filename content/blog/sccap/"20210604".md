---
title: '20210604'
date: 2021-06-04 23:06:96
category: TIL
thumbnail: { thumbnailSrc }
draft: false
---

- SORT 화면에 레이아웃 배치 완성
- **폴더명의 길이가 긴 경우 예외처리**에 대한 논의가 필요하다
- 고정된 레이아웃을 가진 기본폴더/공유폴더/휴지통폴더는 금방 끝났는데, 유저가 생성한 폴더는 개수 변동이 생길 때마다 달라지는 레이아웃을 가지고 있어 다루기가 힘들었다.
- HOC과 Composition을 사용하다보니 깊이 들어있는 자식 컴포넌트(폴더명)의 레이아웃을 폴더 정중앙에 위치시키는 게 힘들었다. 엉뚱한 데다가 style 적용하고 있는 걸 알고 최종적으로 제일 하위 컴포넌트인 `FolderSvg` 컴포넌트에 `flexbox` 정렬 property(`justifyContent`, `alignItems`)를 사용해서 해결했다.

```ts
/* FolderSvg */
import React from 'react'
import { View } from 'react-native'
import Svg, { Path } from 'react-native-svg'
import { IFolderSvgProps } from '@/shared/types'

const FolderSvg: React.FC<IFolderSvgProps> = ({
  width,
  height,
  svgStyle,
  bg_d,
  border_d,
  borderColor,
  borderDashed = false,
  children,
}) => {
  return (
    // Svg 컴포넌트와 Text 혹은 Icon 컴포넌트 배치를 중앙으로 옮기기 위한 설정
    <View
      style={[svgStyle, { justifyContent: 'center', alignItems: 'center' }]}
    >
      <Svg
        width={width}
        height={height}
        viewBox={`0 0 ${width} ${height}`}
        fill="none"
      >
        <Path d={bg_d} fill="white" />
        <Path
          d={border_d}
          stroke={borderColor}
          strokeDasharray={borderDashed ? 8 : 0}
          strokeLinecap="round"
          strokeWidth="4"
        />
      </Svg>
      {children} // Text 컴포넌트 혹은 Icon 컴포넌트가 들어갈 자리
    </View>
  )
}

export default FolderSvg
```

```ts
/* FolderSvgs.tsx */
import * as React from 'react'
import { Text } from 'react-native'
import { FolderSvg } from '@/shared/components'
import { folderSvgsData } from '@/shared/constants'
import { userFolderLayoutData } from '../constants/folderLayoutData.ts'
import withScaleAnimatedDropzone from './withScaleAnimatedDropzone'

// 아래 코드가 render 호출할 때 반복 실행되면 성능에 좋지 않음
// 폴더 Svg 데이터를 바탕으로 겹침시 크기 변환 애니메이션이 실행되는 FolderSvg 생성
const Components = folderSvgsData.map(props =>
  withScaleAnimatedDropzone({ Component: FolderSvg, props, maxScale: 1.5 })
)

// 유저가 만든 폴더 개수만큼 위에 만들어놓은 컴포넌트에 폴더명 컴포넌트(Text) 결합하기
const FolderSvgs: React.FC = ({ userFolders }) => {
  return (
    <>
      {userFolders.map(({ id, name }, index) => {
        const Component = Components[index]
        return (
          <Component key={index} style={userFolderLayoutData[index]}>
            <Text
              style={{
                flex: 1,
                fontSize: 15,
                position: 'absolute',
              }}
            >
              {name}
            </Text>
          </Component>
        )
      })}
    </>
  )
}

export default FolderSvgs
```

---
title: '20210622'
date: 2021-06-22 23:06:10
category: sccap
thumbnail: { thumbnailSrc }
draft: false
---

## 스캡 프로젝트

- [ 변경 전 ] FolderSvgs를 수정모드에 따라 ScrollView 안에 렌더링 혹은 Wrapper 컴포넌트 없이 렌더링 ⇒ [ 변경 후 ] 수정모드 상관없이 FolderSvgs 를 ScrollView에 렌더링
- 변경 처리 후 발생한 현상 1 : 수정모드일 때는 잘 보이던 폴더 이미지들이 수정모드가 아닐 때 사라짐
  - Scrollable 를 수정모드 상관없이 렌더링하니 잘 보임 ⇒ ScrollView 자체가 스크린 높이와 일치하더라도 아이템이 스크린 높이 이상을 가지지 않는 한 absolute가 먹히지 않은 이유
  - 대신 수정모드가 아닐 때도 스크롤이 가능해버림
  - `scrollEnabled` (스크롤 가능여부에 대한 속성)를 수정모드에 따라 상태를 바꿔줘 해결함
- 변경 처리 후 발생한 현상 2 : 수정모드일 때 스크롤했을 경우 생성완료 버튼을 클릭 시 스크롤했던 지점 그대로 멈춰있음
  - `useRef` 를 사용해서 모드 전환할 때 scrollView의 scroll 위치를 0으로 조정하여 해결함

```tsx
// 스크롤 내린 시점에서 editMode 종료 시 스크롤을 top으로 이동시키는 기능
const useScrollTop = (trigger: boolean) => {
  const scrollRef = React.useRef() as React.RefObject<ScrollView>

  React.useEffect(() => {
    scrollRef.current?.scrollTo({
      y: 0,
      animated: true,
    })
  }, [trigger])

  return { scrollRef }
}
;<FolderSvgsScrollView
  ref={scrollRef}
  scrollEnabled={editMode}
  {...panHandlers}
  keyboardShouldPersistTaps="always"
>
  {userFolders.map(({ id, folderName, borderColor }, index) => {
    const FolderSvg = FolderSvgs[index]
    return (
      <FolderSvg
        key={id}
        style={[userFolderLayoutData[index].folderLayout]}
        borderColor={borderColor}
      >
        <FolderName top={index === 1 ? '60%' : '45%'}>{folderName}</FolderName>
        {!editMode && (
          <DeleteButton
            style={userFolderLayoutData[index].deleteButtonLayout}
            onPressIn={onClickDeleteButton(id)}
          >
            <Icon name="remove" color="#fff" />
          </DeleteButton>
        )}
      </FolderSvg>
    )
  })}
  <Scrollable />
  {editMode && <>{NewFolderSvg}</>}
</FolderSvgsScrollView>
```

- 삭제 버튼 클릭시 alert 창 띄우기

  - 취소, 삭제 버튼 사이의 구분선(Division)을 홀수일 때만 렌더링하도록 함

  ```tsx
  <Buttons count={buttons.length}>
    {buttons.map(({ name, onPress }, index) => (
      <React.Fragment key={index}>
        <Division isVisible={index % 2 !== 0}>|</Division>
        <AlertButton onPress={onPress}>
          <ButtonText>{name}</ButtonText>
        </AlertButton>
      </React.Fragment>
    ))}
  </Buttons>
  ```

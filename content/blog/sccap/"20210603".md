---
title: '20210603'
date: 2021-06-03 23:06:47
category: sccap
thumbnail: { thumbnailSrc }
draft: false
---

## 스캡 프로젝트

- 유저가 생성한 폴더나 기본폴더, 휴지통폴더, 공유폴더 공통적으로 dragover, drop 이벤트가 발생해야 하고 애니메이션이 실행되어야 한다.
- dragdrop 이벤트와 애니메이션 공통된 로직을 재사용하기 위해 HOC (고차컴포넌트) 를 만들었다.

```ts
import * as React from 'react'
import { StyleProp, ViewStyle } from 'react-native'
import { DraxDragWithReceiverEventData, DraxView } from 'react-native-drax'
import Animated, {
  useSharedValue,
  useAnimatedStyle,
  withSpring,
} from 'react-native-reanimated'

interface ScaleAnimatedDropzoneProps {
  style?: StyleProp<ViewStyle>
}

const withScaleAnimatedDropzone = (
  Component: React.FC,
  maxScale: number = 1.2
) => {
  const ScaleAnimatedDropzone: React.FC<ScaleAnimatedDropzoneProps> = props => {
    const scale = useSharedValue(1)
    const animatedStyle = useAnimatedStyle(() => ({
      transform: [{ scale: scale.value }],
    }))

    const onReceiveDragDrop = ({
      dragged: { payload },
    }: DraxDragWithReceiverEventData) => {
      scale.value = withSpring(1)
      // TODO: 폴더에 사본이미지 저장 및 앱 종료
      console.log(`received ${payload}`)
    }

    const onReceiveDragOver = () => {
      scale.value = withSpring(maxScale)
    }

    const onReceiveDragExit = () => {
      scale.value = withSpring(1)
    }

    return (
      <DraxView
        onReceiveDragOver={onReceiveDragOver}
        onReceiveDragExit={onReceiveDragExit}
        onReceiveDragDrop={onReceiveDragDrop}
      >
        <Animated.View style={animatedStyle}>
          <Component {...props} />
        </Animated.View>
      </DraxView>
    )
  }

  return ScaleAnimatedDropzone
}

export default withScaleAnimatedDropzone
```

- 아래는 만들어둔 HOC 을 공유폴더에 적용한 코드

```ts
import React from 'react'
import Icon from 'react-native-vector-icons/FontAwesome'
import { FolderSvg } from '@/shared/components'
import withScaleAnimatedDropzone from './withScaleAnimatedDropzone'

const ShareFolderSvg = () => (
  <FolderSvg {...ShareFolderData}>
    <Icon
      name="share-alt"
      color="black"
      size={30}
      style={{
        position: 'absolute',
        left: ShareFolderData.width * 0.5,
        top: ShareFolderData.height * 0.3,
      }}
    />
  </FolderSvg>
)

export default withScaleAnimatedDropzone(ShareFolderSvg)
```

## 노마드 심리테스트 대회

- 모션을 주기 위해 여러 동작을 표시한 이미지가 있는데 이 이미지 중 제일 첫번째 이미지만 쓰고 싶었다.
- 이미지에서 일부분만 잘라서 보여주고 싶을 경우 css에서 `clip` 속성을 사용하면 된다. 이때 이미지는 `position`이 `absolute` 이거나 `fixed` 되어야 한다.

```css
img {
  position: absolute;
  clip: rect(<top>, <right>, <bottom>, <left>);
}
```

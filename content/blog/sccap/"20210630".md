---
title: '20210630'
date: 2021-06-30 23:06:29
category: TIL
thumbnail: { thumbnailSrc }
draft: false
---

## 스캡프로젝트

- 튜토리얼 화면

  - SORT 화면과 동일하지만 추가적으로 가이드 말풍선 노출과 사진 분류 기능을 잠시 막아줄 overlay 기능이 필요했다.
  - 처음에는 SORT 화면에 있는 코드를 그대로 복붙하려고 했으나 `SortScreen` 도 결국 컴포넌트니 그대로 가져다 쓰면 되지 않을까 해서 테스트해보니 성공!
  - 튜토리얼 화면은 총 세 단계로 구성되어 있고 말풍선도 각각 위치나 내용, 색상이 다르다.
  - 말풍선에 대한 정보를 배열로 저장하고 `screenNumber`(튜토리얼 화면 단계)에 맞춰 `SpeechBubble` 컴포넌트를 렌더링하는 방식으로 구현했다.
  - overlay 화면을 클릭했을 때 `screenNumber` 값을 1 증가시켜 다음 튜토리얼 단계에 보여질 말풍선 데이터를 결정한다.
  - overlay 화면을 클릭했을 때 마지막 튜토리얼 화면이면 overlay를 제외시키고 storage에서 completedTutorial 값을 true로 변경해준다.

  ```ts
  const TutorialScreen: React.FC = () => {
    const [overlayVisible, setOverlayVisible] = React.useState<boolean>(true)
    const [screenNumber, setScreenNumber] = React.useState<number>(0)
    const incrementScreenNumber = () => {
      if (screenNumber + 1 >= speechBubbles.length) {
        setOverlayVisible(false)
        storage.setCompletedTutorial(true)
        return
      }
      setScreenNumber(prev => prev + 1)
    }
    return (
      <Wrapper>
        <Overlay
          onBackdropPress={incrementScreenNumber}
          isVisible={overlayVisible}
          overlayStyle={styles.overlayStyle}
          backdropStyle={styles.backdropStyle}
        >
          <SpeechBubble {...speechBubbles[screenNumber]} />
        </Overlay>
        <SortScreen />
      </Wrapper>
    )
  }
  ```

- backgroundService에서 completedTutorial값에 따라 렌더링할 스크린 분기 처리를 했다.

```ts
navigate(completedTutorial ? 'Sort' : 'Tutorial', {
  screenshotPath,
  screenshotBase64,
})
```

- 현재 MAIN화면과 같은 네비게이션 선상에서 Sort를 두니 MAIN이 먼저 출력하고 SORT화면이 나타난다.
  - 아직 시도해보지 않았지만 SORT를 네비게이션 스택에 두지 않고 state 값으로 SORT 출력과 네비게이션(MAIN, FOLDER, CATEGORY, PHOTO) 출력을 결정해야 해당 현상이 없어질 것 같다.

---
title: '19'
date: 2021-03-07 14:03:86
category: challenge30
thumbnail: { thumbnailSrc }
draft: false
---

## FE 테스트 

토요일 오후 1시부터 4시까지 3시간 동안 프로그래머스에서 주최한 FE 과제 전형을 진행했다. 
집중해서 작업해야 하는 시간 만큼 주말인데도 같이 사는 언니를 밖으로 떠밀고 최대한 조용한 환경을 갖추려 했다. 
결론적으로 시간 안에 최소한의 기능도 구현하지 못했다. 완성률은 30%인 것 같다. 하지만 오랜만에 머리를 싸매고
코드를 짜니 기분이 좋았다. 미완성이긴 해도 과제에서 요구한 '재사용성을 고려한 코드'에 나름대로 근접한 것 같다. 
변경사항이 생길 것으로 여기는 부분들을 모두 외부에서 인자로 전달받는 형태로 구현했다. 비슷한 형태의 UI 컴포넌트를 `클래스 상속`을 적용하였다. 또 외부 API를 요청할 때 응답을 받기 전 loading해야하는 부분을 api 객체가 대신 기억하여 매 호출마다 loading 컴포넌트를 실행하고 중지하도록 했다. 

## Infinite Scroll
스크롤이 끝날 때마다 배열에 들어있는 데이터를 일정 갯수씩 추가적으로 로드하는 기능을 구현하고 있다. 
lazy loading을 구현할 때 썼던 `IntersectionObserver`를 여기서도 사용한다. 
테스트 코드를 짜면서 진행 중인데 바로 코드를 진행하지 않고 테스트부터 짜려니 시간이 오래 걸린다. 
자동으로 어떤 기능들이 있어야 하고 어떤 순서로 실행할 건지 생각하게 만든다. 귀찮지만 이런 습관이 탄탄한 코드를 작성하는 기반이 될 것이다. 

테스트할 때 'window' 환경이 아니라서 `IntersectionObserver`가 undefined 하다는 에러가 났다. 이 경우 
`beforeEach`에서 `window.IntersectionObserver = jest.fn(function(callback,options){})` mock 함수를 생성하고 `afterEach`에서 `window.IntersectionObserver.mockRestore()` mock 함수를 지우면 된다. 
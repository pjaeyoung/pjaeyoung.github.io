---
title: '11'
date: 2021-02-23 15:02:24
category: challenge30
thumbnail: { thumbnailSrc }
draft: false
---

## 자바스크립트 패턴과 테스트
- 콜백 패턴의 경우 테스트를 할 때 고려해야 할 사항은 3가지가 있다. 
    - 첫째, 콜백 호출 횟수다. 가령 배열 메서드 forEach에서 사용하는 콜백의 경우 콜백호출 횟수가 곧 배열 메서드 길이와 같아야 한다. 
      jest를 사용한다면 `jest.fn`으로 테스트용 콜백함수를 생성한 후 `toHaveBeenCalledTimes` 단언문으로 검사한다.  
    - 둘째, 콜백에 넘겨진 인자를 확인한다. 배열 메서드 forEach를 제대로 돌았다면 테스트용 콜백함수의 기록사항에서 마주친 값들이 배열요소 순서대로 인지 확인한다. 
      `toHaveBeenNthCalledWith(호출 회, 배열요소)` 단언문으로 검사한다. 
    - 셋째, 검사하고자 하는 메서드 안에서 'this'가 사용된다면 this가 아닌 경우를 검사해야 한다. 위의 두 사항과 달리 실제로 콜백으로 넘겨줄 함수 그 자체만 검사하는 용도다. `call, apply, bind` 메서드로 'this' 값을 임의로 바꿔서 검사한다. 